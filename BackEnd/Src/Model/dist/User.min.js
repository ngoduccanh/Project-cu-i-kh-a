"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _mongoose=_interopRequireDefault(require("mongoose")),_bcrypt=_interopRequireDefault(require("bcrypt"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var userSchema=new _mongoose.default.Schema({username:{type:String},age:{type:String},gender:{type:String,enum:["male","female","other"]},email:{type:String,required:!0},password:{type:String},avatar:{type:String,default:"https://via.placeholder.com/150"},bio:{type:String,default:""},followers:[{type:_mongoose.default.Schema.Types.ObjectId,ref:"User"}],following:[{type:_mongoose.default.Schema.Types.ObjectId,ref:"User"}]},{timestamps:!0});userSchema.pre("save",function(r){var t,a,n;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this).isModified("password")){e.next=18;break}if(!t.password||t.password.length<6)return a=new Error("Mật khẩu phải có ít nhất 6 ký tự"),e.abrupt("return",r(a));e.next=5;break;case 5:return e.prev=5,e.next=8,regeneratorRuntime.awrap(_bcrypt.default.genSalt(10));case 8:return n=e.sent,e.next=11,regeneratorRuntime.awrap(_bcrypt.default.hash(t.password,n));case 11:return t.password=e.sent,e.abrupt("return",r());case 15:return e.prev=15,e.t0=e.catch(5),e.abrupt("return",r(e.t0));case 18:case"end":return e.stop()}},null,this,[[5,15]])});var User=_mongoose.default.model("User",userSchema),_default=User;exports.default=_default;
//# sourceMappingURL=User.min.js.map
